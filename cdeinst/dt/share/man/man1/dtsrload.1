'\" t
...\" srload.sgm /main/7 1996/09/08 19:57:05 rws $
.de P!
.fl
\!!1 setgray
.fl
\\&.\"
.fl
\!!0 setgray
.fl			\" force out current output buffer
\!!save /psv exch def currentpoint translate 0 0 moveto
\!!/showpage{}def
.fl			\" prolog
.sy sed -e 's/^/!/' \\$1\" bring in postscript file
\!!psv restore
.
.de pF
.ie     \\*(f1 .ds f1 \\n(.f
.el .ie \\*(f2 .ds f2 \\n(.f
.el .ie \\*(f3 .ds f3 \\n(.f
.el .ie \\*(f4 .ds f4 \\n(.f
.el .tm ? font overflow
.ft \\$1
..
.de fP
.ie     !\\*(f4 \{\
.	ft \\*(f4
.	ds f4\"
'	br \}
.el .ie !\\*(f3 \{\
.	ft \\*(f3
.	ds f3\"
'	br \}
.el .ie !\\*(f2 \{\
.	ft \\*(f2
.	ds f2\"
'	br \}
.el .ie !\\*(f1 \{\
.	ft \\*(f1
.	ds f1\"
'	br \}
.el .tm ? font underflow
..
.ds f1\"
.ds f2\"
.ds f3\"
.ds f4\"
.ta 8n 16n 24n 32n 40n 48n 56n 64n 72n 
.TH "dtsrload" "user cmd"
.SH "NAME"
\fBdtsrload\fP \(em Load
document objects in a database
.SH "SYNOPSIS"
.PP
\fBdtsrload\fP-d\fIdbname\fP  [-c]  [-t\fIetxstr\fP]  [-h0  | -h\fIhashsz\fP ]  [-e\fIhufname\fP]  [-p\fIdotcnt\fP] \fIfile\fP 
.SH "DESCRIPTION"
.PP
\fBdtsrload\fP loads document header information and, in
AusText type databases, documents themselves into a DtSearch database\&.
The input is a file of one or more documents in a simple canonical
format (fzk file)\&. An fzk file can be generated by
\fBdtsrhan\fP manually with a text editor, or by a special
application program created for the purpose\&. Typically the same fzk file
is used for \fBdtsrload\fP and
\fBdtsrindex\fP, but it is not required and there are
situations where it may not be desirable\&. (See
\fBdtsrfzkfiles\fP(4) for information about DtSearch fzk files)\&.
.PP
\fBdtsrload\fP also maintains the current total document
count in the database\&'s configuration and status record\&.
.PP
If a document\&'s unique key in the fzk file does not preexist in the
database, \fBdtsrload\fP considers the document to be new
and does not add it as a new document\&. If the document\&'s key already
exists in the database, \fBdtsrload\fP totally replaces its
record with the one in the fzk file\&. When duplicate record ids are
encountered in a single fzk file, only the first occurrence of the
document is loaded into the database, the second one is discarded\&.
Duplicate record ids are maintained during execution with a hash table\&.
.PP
\fBdtsrload\fP also performs a data compression function for
documents that are actually stored in a database repository (that is,
AusText type databases)\&. In order to do this an encode
compression huf file must be available\&.
(See \fBhuffcode\fP(1) for information about DtSearch document compression\&.)
.PP
\fBdtsrload\fP also performs a data compression function for
documents that are actually stored in a database repository (that is,
AusText type databases)\&. In order to do this an encode
compression huf file must be available\&.
(See \fBhuffcode\fP(1) for information about DtSearch document compression\&.)
.PP
\fBdtsrload\fP does not index the words used to access the
database\&. This is done by \fBdtsrindex\fP\&. To prevent
database link corruption, execute \fBdtsrindex\fP
immediately after \fBdtsrload\fP\&.
.PP
.RS
\fBCaution:  
.PP
To prevent database corruption, execute \fBdtsrload\fP only
after all users of a preexisting database have exited their search
programs to prevent database corruption\&. For a single fzk file,
\fBdtsrload\fP must be executed immediately before
\fBdtsrindex\fP so that \fBdtsrindex\fP can
map the words it indexes to the correct internal database addresses\&.
Only after both programs successfully complete execution may users again
be allowed to perform online searches of the database\&.
.RE
.SH "OPTIONS"
.PP
The following options are available:
.PP
.RS
\fBNote:  
.PP
If an option takes a value, the value must be directly appended to
the option name without white space\&.
.RE
.IP "\fB-d\fP\fIdbname\fP" 10
Specifies the 1 to 8 ASCII character name of the database to be
updated\&.
If an optional directory path is not prepended to the database
name, \fBdtsrload\fP will attempt to open the database from
the current working directory\&. File name extensions for database
files are automatically appended\&.
.IP "\fB-c\fP" 10
Instructs \fBdtsrload\fP to initialize the database total
document count by counting existing records before loading the current
batch\&. This option is usually not required\&.
.IP "\fB-t\fP\fIetxstr\fP" 10
Specifies the end of document text delimiter string\&. The default
document separator in an fzk file is an ASCII form feed character
followed by an ASCII line feed (\&'\f\n\&')\&. For certain multibyte languages
it may be more convenient to specify a nonASCII string as the document
delimiter\&.
.IP "\fB-h0\fP" 10
Instructs \fBdtsrload\fP to not check for duplicate
record ids\&. This option should not be specified unless it
is certain that there are no duplicate ids in the fzk file\&.
.IP "\fB-h\fP\fIhashsz\fP" 10
Sets the duplicate record id hash table size to
\fIhashsz\fP\&. The default is 3000\&.
\fBdtsrload\fP will execute more efficiently if the
specified table size is larger than the number of documents in the fzk
file\&.
.IP "\fB-e\fP\fIhufname\fP" 10
Sets the compression encode file name to
\fIhufname\fP\&. The default is
\fBophuf\&.huf\fP\&. The file name can include a path prefix\&.
This option is ignored unless the database type is AusText\&.
.IP "\fB-p\fP\fIdotcount\fP" 10
Instructs \fBdtsrload\fP to print a progress character to
stdout for every \fIdotcount\fP documents
processed\&. The default is 20\&.
.SH "OPERANDS"
.PP
The required input file name (\fIfile\fP)
identifies the file to be processed by \fBdtsrload\fP\&. It
can optionally include a path prefix, either from root or relative to
the current working directory\&. If a file name extension is not
specified, \fBdtsrload\fP assumes a default extension of
\fB\&.fzk\fP\&.
.SH "ENVIRONMENT VARIABLES"
.PP
None\&.
.SH "RESOURCES"
.PP
None\&.
.SH "ACTIONS/MESSAGES"
.PP
None\&.
.SH "RETURN VALUES"
.PP
The return values are as follows:
.IP "0" 10
\fBdtsrload\fP completed successfully\&.
.IP "1" 10
\fBdtsrload\fP successfully
recovered from an error\&. This occurs when one or more
documents were discarded because of a partially invalid
fzk file format, duplicate record ids, or empty record text\&.
.IP ">1" 10
\fBdtsrload\fP encountered a fatal error\&.
.SH "FILES"
.PP
\fBdtsrload\fP reads the specified fzk file and opens
all the database and related language files for the specified
database name\&.
.PP
For AusText type databases, it also reads the compression encode file
\fBophuf\&.huf\fP\&.
.PP
\fBdtsrload\fP updates the following database files:
.IP "" 10
\fIdbname\fP\&.d00
.IP "" 10
\fIdbname\fP\&.d01
.IP "" 10
\fIdbname\fP\&.k00
.IP "" 10
\fIdbname\fP\&.k01
.SH "EXAMPLES"
.PP
Load database \fBmydb\fP with the documents specified in
the fzk file named \fBbatch1\&.fzk\fP in the current
working directory\&.
.PP
.nf
\f(CWdtsrload -dmydb batch1\fR
.fi
.PP
.PP
Load database \fBmydb\fP with the documents specified in
the fzk file \fB/u/dtsearch/jpndocs\&.1\fP\&. Three ASCII
plus signs at the bottom of each document signals the end of document
text and the beginning of the next fzk file record\&.
.PP
.nf
\f(CWdtsrload -dmydb -t+++ /u/dtsearch/jpndocs\&.1\fR
.fi
.PP
.SH "SEE ALSO"
.PP
\fBdtsrhan\fP(1),
\fBdtsrindex\fP(1),
\fBhuffcode\fP(1),
\fBdtsrfzkfiles\fP(4),
\fBDtSearch\fP(5)
...\" created by instant / docbook-to-man, Sun 02 Sep 2012, 09:40
